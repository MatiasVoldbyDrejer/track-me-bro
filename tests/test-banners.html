<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Track Me Bro - Banner Detection Test Page</title>
  <style>
    body {
      font-family: -apple-system, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 0 20px;
      background: #f5f5f5;
      color: #333;
    }
    h1 { margin-bottom: 8px; }
    h2 { margin-top: 32px; color: #555; font-size: 16px; }
    .banner {
      border: 2px solid #ccc;
      padding: 16px;
      margin: 8px 0 24px;
      border-radius: 8px;
      background: #fff;
    }
    .banner button {
      padding: 8px 16px;
      margin: 4px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    .primary { background: #ff6b35; color: white; }
    .secondary { background: #ddd; color: #333; }
    .result {
      margin-top: 24px;
      padding: 16px;
      background: #1a1a2e;
      color: #fff;
      border-radius: 8px;
      font-family: monospace;
      font-size: 13px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>Track Me Bro - Test Page</h1>
  <p>Load the extension, then open this page. Check the console and the log below to see which banners were detected and clicked.</p>

  <div class="result" id="log">Waiting for clicks...</div>

  <!-- Layer 1: OneTrust -->
  <h2>Layer 1: OneTrust (platform selector)</h2>
  <div class="banner" id="onetrust-banner-sdk">
    <p>We use cookies to improve your experience.</p>
    <button id="onetrust-accept-btn-handler" class="primary" onclick="logClick('OneTrust')">Accept All Cookies</button>
    <button class="secondary">Cookie Settings</button>
  </div>

  <!-- Layer 1: Cookiebot -->
  <h2>Layer 1: Cookiebot (platform selector)</h2>
  <div class="banner" id="CybotCookiebotDialog">
    <p>This website uses cookies.</p>
    <button id="CybotCookiebotDialogBodyLevelButtonLevelOptinAllowAll" class="primary" onclick="logClick('Cookiebot')">Allow All</button>
    <button class="secondary">Customize</button>
  </div>

  <!-- Layer 1: CookieYes -->
  <h2>Layer 1: CookieYes (platform selector)</h2>
  <div class="banner">
    <p>We value your privacy.</p>
    <button class="cky-btn-accept primary" onclick="logClick('CookieYes')">Accept All</button>
    <button class="secondary">Reject All</button>
  </div>

  <!-- Layer 1: Complianz (WordPress) -->
  <h2>Layer 1: Complianz WordPress (platform selector)</h2>
  <div class="banner">
    <p>This site uses functional cookies and external scripts to improve your experience.</p>
    <button class="cmplz-accept primary" onclick="logClick('Complianz')">Accept</button>
    <button class="secondary">Deny</button>
  </div>

  <!-- Layer 2: Generic CSS selector -->
  <h2>Layer 2: Generic CSS selector (.cookie-accept)</h2>
  <div class="banner">
    <p>Cookies help us deliver our services.</p>
    <button class="cookie-accept primary" onclick="logClick('Generic CSS')">Accept Cookies</button>
  </div>

  <!-- Layer 2: Data attribute selector -->
  <h2>Layer 2: Data attribute ([data-consent="accept"])</h2>
  <div class="banner">
    <p>We use cookies for analytics.</p>
    <button data-consent="accept" class="primary" onclick="logClick('Data Attribute')">OK</button>
    <button class="secondary">Manage</button>
  </div>

  <!-- Layer 3: Text content matching -->
  <h2>Layer 3: Text content matching (button in cookie context)</h2>
  <div class="banner cookie-notice" id="consent-wrapper">
    <p>We use cookies to personalize content and ads.</p>
    <button class="primary" onclick="logClick('Text Match')">Accept All Cookies</button>
    <button class="secondary">Manage Preferences</button>
  </div>

  <!-- Layer 4: ARIA label matching -->
  <h2>Layer 4: ARIA label matching</h2>
  <div class="banner gdpr-overlay">
    <p>This site uses cookies.</p>
    <button aria-label="Accept all cookies" class="primary" onclick="logClick('ARIA Label')">OK</button>
  </div>

  <!-- FALSE POSITIVE: Non-cookie "OK" button -->
  <h2>FALSE POSITIVE TEST: Non-cookie modal (should NOT be clicked)</h2>
  <div class="banner" id="delete-modal">
    <p>Are you sure you want to delete this item?</p>
    <button class="primary" onclick="logClick('FALSE POSITIVE - Delete Modal')">OK</button>
    <button class="secondary">Cancel</button>
  </div>

  <!-- FALSE POSITIVE: Newsletter signup -->
  <h2>FALSE POSITIVE TEST: Newsletter signup (should NOT be clicked)</h2>
  <div class="banner" id="newsletter-signup">
    <p>Subscribe to our newsletter!</p>
    <button class="primary" onclick="logClick('FALSE POSITIVE - Newsletter')">Accept</button>
  </div>

  <!-- FALSE POSITIVE: LinkedIn "Accept" connection request -->
  <h2>FALSE POSITIVE TEST: LinkedIn connection request (should NOT be clicked)</h2>
  <div class="banner" id="invitation-card">
    <p><strong>John Doe</strong> wants to connect with you.</p>
    <button aria-label="Accept invitation from John Doe" class="primary" onclick="logClick('FALSE POSITIVE - LinkedIn Accept')">Accept</button>
    <button class="secondary">Ignore</button>
  </div>

  <!-- FALSE POSITIVE: LinkedIn "Accept" with follow context -->
  <h2>FALSE POSITIVE TEST: Follow request (should NOT be clicked)</h2>
  <div class="banner" id="follow-request">
    <p><strong>Jane Smith</strong> wants to follow you.</p>
    <button aria-label="Accept follow request" class="primary" onclick="logClick('FALSE POSITIVE - Follow Accept')">Accept</button>
    <button class="secondary">Decline</button>
  </div>

  <!-- TRUE POSITIVE: ARIA label button inside cookie container -->
  <h2>Layer 4: ARIA label inside cookie banner (SHOULD be clicked)</h2>
  <div class="banner cookie-consent-overlay">
    <p>We use cookies and similar technologies.</p>
    <button aria-label="Accept all cookies" class="primary" onclick="logClick('ARIA Cookie Consent')">OK</button>
    <button class="secondary">Manage settings</button>
  </div>

  <!-- DELAYED BANNER: Appears after 2 seconds -->
  <h2>Delayed banner (appears after 2 seconds)</h2>
  <div id="delayed-container" class="banner" style="min-height: 60px;">
    <p><em>Banner will appear here in 2 seconds...</em></p>
  </div>

  <script>
    const logEl = document.getElementById('log');
    let clickLog = [];

    function logClick(source) {
      const entry = `[${new Date().toLocaleTimeString()}] Clicked: ${source}`;
      clickLog.push(entry);
      logEl.textContent = clickLog.join('\n');
      console.log(entry);
    }

    // Inject delayed banner after 2 seconds
    setTimeout(() => {
      const container = document.getElementById('delayed-container');
      container.innerHTML = `
        <p>We use cookies. This banner loaded late!</p>
        <button class="cc-allow primary" onclick="logClick('Delayed CC-Allow')">Got it</button>
      `;
    }, 2000);
  </script>
</body>
</html>
